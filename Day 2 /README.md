# Day 2: Timing libs, hierarchical vs flat synthesis and efficient flop coding styles

## Lab Steps

# Introduction to timing .libs

## Introduction to dot Lib 

![image](https://github.com/user-attachments/assets/035d7cf3-845b-4185-a30a-528c4d198a30)

## sky130_fd_sc_hd__tt_025c_1v80
### Here tt --> indicates a typical process
### 025c --> temperature
### 1v80 --> voltage that is 1.8 V
![image](https://github.com/user-attachments/assets/fc7d9485-4cac-4079-b400-50bcca7c237d)

## Different types of cells in library

![image](https://github.com/user-attachments/assets/43b4f3e7-5b50-4174-828d-187a2c0641fd)

# Behavioral model of a particular cell

## In the gvim write the command as

:sp /home/comp/sky130RTLDesignAndSynthesisWorkshop/verilog_model/sky130_fd_sc_a2111o_1.behavioral.v

![image](https://github.com/user-attachments/assets/5ebc9c4b-3037-475c-b87c-9763dc740d43)

## Verilog model of 2 input AND Gate

![image](https://github.com/user-attachments/assets/7160414a-e348-471c-8855-82171faa54e9)

## Wider cells are faster but area is going to be more. They also consume more power.

## Smaller cells delay will be more and area will be less

![image](https://github.com/user-attachments/assets/6b204267-0b92-4b7b-b51f-2136a9e67c26)

# Hierarchical vs Flat Synthesis

## Consider an example of multiple modules

```
module sub_module2 (input a, input b, output y);
	assign y = a | b;
endmodule

module sub_module1 (input a, input b, output y);
	assign y = a&b;
endmodule


module multiple_modules (input a, input b, input c , output y);
	wire net1;
	sub_module1 u1(.a(a),.b(b),.y(net1));  //net1 = a&b
	sub_module2 u2(.a(net1),.b(c),.y(y));  //y = net1|c ,ie y = a&b + c;
endmodule

```

![image](https://github.com/user-attachments/assets/0ad22183-948e-4923-a3fd-2d070bd22bc5)

![image](https://github.com/user-attachments/assets/15f599bb-f513-4e33-bc73-92e9fd5f0f21)

![image](https://github.com/user-attachments/assets/738c581e-3fb1-4fba-9587-951b693bdae4)

### synth -top multiple_modules

![image](https://github.com/user-attachments/assets/6ef0025f-3ccf-4733-81e6-03e04c81779b)


![image](https://github.com/user-attachments/assets/aaf2e579-f9d6-4983-b38a-1b979e2d55ae)


### abc -liberty /home/comp/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib

![image](https://github.com/user-attachments/assets/6f955eae-8829-4501-88b4-51381bfc7963)

### show multiple_modules

![image](https://github.com/user-attachments/assets/72c5c806-c447-4e15-8b4e-51581ff82a70)

### write_verilog multiple_modules_hier.v

![image](https://github.com/user-attachments/assets/ef1981d7-2bb8-4e48-90e6-8a8f1cef7036)

### Hierarchies are preserved

![image](https://github.com/user-attachments/assets/ced43954-0069-4296-bc7f-76e5cfb8c0f0)

```
/* Generated by Yosys 0.46+124 (git sha1 d1695ad99, g++ 9.4.0-1ubuntu1~20.04.2 -fPIC -O3) */

module multiple_modules(a, b, c, y);
  input a;
  wire a;
  input b;
  wire b;
  input c;
  wire c;
  wire net1;
  output y;
  wire y;
  sub_module1 u1 (
	.a(a),
	.b(b),
	.y(net1)
  );
  sub_module2 u2 (
	.a(net1),
	.b(c),
	.y(y)
  );
endmodule

module sub_module1(a, b, y);
  wire _0_;
  wire _1_;
  wire _2_;
  input a;
  wire a;
  input b;
  wire b;
  output y;
  wire y;
  sky130_fd_sc_hd__and2_0 _3_ (
	.A(_1_),
	.B(_0_),
	.X(_2_)
  );
  assign _1_ = b;
  assign _0_ = a;
  assign y = _2_;
endmodule

module sub_module2(a, b, y);
  wire _0_;
  wire _1_;
  wire _2_;
  input a;
  wire a;
  input b;
  wire b;
  output y;
  wire y;
  sky130_fd_sc_hd__or2_0 _3_ (
	.A(_1_),
	.B(_0_),
	.X(_2_)
  );
  assign _1_ = b;
  assign _0_ = a;
  assign y = _2_;
endmodule

```

# flatten command: To write flat netlist

![image](https://github.com/user-attachments/assets/d2b939ab-68e3-42e7-9e47-8400b1000eae)

### write_verilog -noattr multiple_modules_flat.v

### !gvim  multiple_modules_flat.v

![image](https://github.com/user-attachments/assets/9103fbdc-371e-4900-b516-cf7346792084)

## Difference between hierarchical and flat

### In gvim type :vsp multiple_modules_hier.v

![image](https://github.com/user-attachments/assets/867d07dd-64de-4822-bfad-23a7096b1874)

# synthesizing sub module in multiple_modules

## Steps

### + read_liberty -lib /home/comp/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib

### + read_verilog /home/comp/sky130RTLDesignAndSynthesisWorkshop/verilog_files/multiple_modules.v

### + synth -top sub_module1

![image](https://github.com/user-attachments/assets/340b92b7-3ff8-4210-bad4-5b2aa6a5caf5)


![image](https://github.com/user-attachments/assets/67e5644f-0ab5-4b8f-a85a-1216eebdd150)


```
### + abc -liberty /home/comp/sky130RTLDesignAndSynthesisWorkshop/lib/sky130_fd_sc_hd__tt_025C_1v80.lib

### + show


![image](https://github.com/user-attachments/assets/fd2c519a-f4a9-4203-8aa0-e23bbb495054)

## Why sub module level synthesis?

![image](https://github.com/user-attachments/assets/ed765405-9b4b-425b-9390-844ae30d45a9)












